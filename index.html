<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Heart Animation</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      background-color: #F4C2C2;
      font-family: Courier, monospace;
    }
    canvas {
      display: block;
      position: absolute;
    }
    .text-line {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-style: italic;
      font-weight: bold;
      color: red;
      white-space: nowrap;
    }
  </style>
</head>
<body>
<canvas id="canvas"></canvas>
<div id="texts">
  <div id="text1" class="text-line" style="top: 25%; font-size: 48px;"></div>
  <div id="text2" class="text-line" style="top: 48%; font-size: 36px;"></div>
  <div id="text3" class="text-line" style="top: 65%; font-size: 40px;"></div>
</div>
<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const width = window.innerWidth;
  const height = window.innerHeight;
  canvas.width = width;
  canvas.height = height;

  ctx.translate(width / 2, height / 2);
  ctx.strokeStyle = 'deepskyblue';
  ctx.lineWidth = 2;

  const startTime = Date.now();
  let t = 0;

  function heartX(k) {
    return 15 * Math.pow(Math.sin(k), 3);
  }

  function heartY(k) {
    const y = 12 * Math.cos(k) - 5 * Math.cos(2 * k) - 2 * Math.cos(3 * k) - Math.cos(4 * k);
    return y * 1.25;
  }

  let points = [];
  function animate() {
    const now = Date.now();
    if (now - startTime < 11000) {
      const x = heartX(t) * 25;
      const y = heartY(t) * 20 + 20;
      points.push({x, y});
      if (points.length > 1) {
        ctx.beginPath();
        ctx.moveTo(points[points.length - 2].x, points[points.length - 2].y);
        ctx.lineTo(x, y);
        ctx.stroke();
      }
      t += 0.1;
      requestAnimationFrame(animate);
    } else {
      startTextTyping();
    }
  }
  animate();

  const texts = [
    {id: 'text1', text: 'Dasha'},
    {id: 'text2', text: 'I love you!'},
    {id: 'text3', text: ':3'}
  ];

  function typeText(elementId, text, delay) {
    return new Promise(resolve => {
      const el = document.getElementById(elementId);
      let i = 0;
      function step() {
        if (i < text.length) {
          el.textContent += text[i];
          i++;
          setTimeout(step, Math.random() * 150 + 50);
        } else {
          resolve();
        }
      }
      step();
    });
  }

  async function startTextTyping() {
    for (let i = 0; i < texts.length; i++) {
      await typeText(texts[i].id, texts[i].text);
    }
  }
</script>
</body>
</html>
